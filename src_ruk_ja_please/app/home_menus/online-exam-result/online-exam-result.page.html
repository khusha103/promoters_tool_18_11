<ion-header [translucent]="true" class="custom-border-header">
  <ion-toolbar class="maincontainer">
    <ion-grid>
      <ion-row class="toolbar-row">
        <ion-col size="4" class="toolbar-col">
          <a href="#" class="back_link">
            <!-- Optional back button -->
          </a>
        </ion-col>
        <ion-col size="4" class="toolbar-col second_col_img">
          <img src="/assets/icon/homeicons/sony_light.svg" alt="" class="SONY_mail_logo dark_pta">
          <img src="/assets/icon/homeicons/sony_dark.svg" alt="" class="SONY_mail_logo light_pta">
        </ion-col>
        <ion-col size="4" class="toolbar-col">
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content class="main-content dark light">
  <div class="result-container">
    <h2>Your Score: {{ score }}%</h2>
    <p>{{ suggestiveMessage }} </p>



    <ion-button expand="full" (click)="goHome()" class="result-btn">Go Back to Home</ion-button>
    <ion-button expand="full" (click)="toggleResults()" class="result-btn">
      {{ showResults ? 'Hide Results' : 'Show Results' }}
    </ion-button>

    <div *ngIf="showResults" class="results-details">
      <h3>Attempted Questions:</h3>


      <ion-list>
        <ion-item *ngFor="let result of results"
          [ngClass]="{'correct-answer': result.is_correct, 'incorrect-answer': !result.is_correct}">
          <ion-label>
            <!-- <h2>{{ result.question_ar }}</h2> -->
             <h2>{{ getLocalizedResultQuestion(result) }}</h2>
            <ion-list style="padding: 10px;">
              <ion-item *ngFor="let option of result.options" lines="none" class="option-item">
                <!-- <ion-label [ngClass]="{
              'selected-answer': option.answer_id === result.user_answer_id,
              'correct-option': option.is_right === '1',
              'incorrect-option': !result.is_correct && option.answer_id === result.user_answer_id
            }">
                  {{ option.options_ar }}
                </ion-label> -->
                <ion-label [ngClass]="{
                  'selected-answer': option.answer_id === result.user_answer_id,
                  'correct-option': option.is_right === '1',
                  'incorrect-option': !result.is_correct && option.answer_id === result.user_answer_id
                }">
                      {{ getLocalizedResultOption(option) }}
                    </ion-label>
                <ion-icon *ngIf="option.answer_id === result.user_answer_id"
                  [name]="result.is_correct ? 'checkmark-circle' : 'close-circle'" slot="end"
                  [color]="result.is_correct ? 'success' : 'danger'">
                </ion-icon>
                <ion-icon *ngIf="!result.is_correct && option.is_right === '1'" name="checkmark-circle" slot="end"
                  color="success">
                </ion-icon>
              </ion-item>
            </ion-list>
            <p *ngIf="!result.is_correct" class="error-message">
              Your answer: {{ getUserAnswer(result) }} (Incorrect)<br>
              Correct answer: {{ getCorrectAnswer(result) }}
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>